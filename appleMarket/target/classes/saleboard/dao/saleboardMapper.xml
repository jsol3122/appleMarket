<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="saleboardSQL">
  	<insert id="saleboardWrite" parameterType="saleboard.bean.SaleboardDTO">
 		insert into saleboard (
 			sale_status,
			sale_subject,
			sale_price,
			sale_nego_YN,
			sale_category,
			sale_content,
			member_id,
			sale_logtime,
			sale_hide,
			sale_image1,
			sale_image2,
			sale_image3,
			sale_image4,
			sale_image5,
			member_profilePic,
			location1_addr2,
			sale_free_YN,
			sale_ad_YN,
			member_reputation,
			sale_seq)	
 		values(
	 		#{sale_status},
			#{sale_subject},
			#{sale_price},
			#{sale_nego_YN},
			#{sale_category},
			#{sale_content},
			#{member_id},
			sysdate,
			#{sale_hide},
			#{sale_image1},
			#{sale_image2},
			#{sale_image3},
			#{sale_image4},
			#{sale_image5},
			#{member_profilePic},
			#{location1_addr2},
			#{sale_free_YN},
			#{sale_ad_YN},
			#{member_reputation},
			seq_sale.nextval
 		) 
 	</insert>
 	
 	<select id="getSaleboardList" resultType="saleboard.bean.SaleboardDTO">
 		select * from saleboard 
	</select>
	
	<select id="getSaleboardView" resultType="saleboard.bean.SaleboardDTO"> 		
 		select * from saleboard where sale_seq=#{sale_seq}	 
 	</select>
 	
 	<update id="saleboardHit" parameterType="saleboard.bean.SaleboardDTO">
 		update saleboard set sale_hit = sale_hit + 1 where sale_seq = #{sale_seq}
 	</update>
 	
<!--  	<select id="saleboardPopular" resultType="saleboard.bean.SaleboardDTO">
 		select * from saleboard where 조회수 내림차순했을 때 상위 10개
 	</select> 
 --> 	
 	<select id="getSaleboardIdList" parameterType="String" resultType="saleboard.bean.SaleboardDTO">
		select * from saleboard where sale_id=#{sale_id}
 	</select>
 	
 	<update id="saleboardModify" parameterType="saleboard.bean.SaleboardDTO">
 		update saleboard set sale_subject=#{sale_subject}, sale_content=#{sale_content},
							sale_image1=#{sale_image1}, sale_image2=#{sale_image2}, sale_image3=#{sale_image3} 		
 		 								where sale_seq=#{sale_seq}
 	</update>
 	
 	
 	<delete id="delete" parameterType="String"> <!-- int 로 넣어야 하나? -->
 		delete saleboard where sale_seq=#{sale_seq}
 	</delete>
 	
 	
 	<select id="saleboardSearch" parameterType="java.util.Map" resultType="saleboard.bean.SaleboardDTO">
 
	select * from saleboard where
 		<choose>
 			<when test="columnName=='sale_id'">
 				sale_id like '%' || #{value} || '%' 			
 			</when>
 			<when test="columnName=='sale_subject'">
 				sale_subject like '%' || #{value} || '%'
 			</when>
 			<otherwise>
 				sale_content like '%' || #{value} || '%'
 			</otherwise>
 		</choose> 		
 
 	</select>
 	
 	<update id="saleboardPick" parameterType="hashmap"> <!-- 파라미터 타입 확인 필요 -->
	 	update saleboard set sale_heart_count = sale_heart_count + 1 where sale_seq = #{sale_seq}
	</update>
 
<!-- 수정 필요 -->
	<insert id="saleboardChat" parameterType="String"> <!-- resultType="" -->
		insert into chat (member_id)
			values(#{member_id})
	</insert> 
 	
 	
 	<!-- parameterType="String" 인 이유는 non_exist / exist 가 return 값이라 그렇다. -->
<!-- 	<select id="checkId" parameterType="String" resultType="user">
 		select * from usertable where id=#{id}
 	</select> 
 	근데 이거 getUser랑 똑같아서 걍 이거 지우고 getUser로 쓰기로 함
 --> 	
 </mapper>